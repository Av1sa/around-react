(this["webpackJsonparound-react"]=this["webpackJsonparound-react"]||[]).push([[0],{12:function(e,t,a){e.exports=a(18)},17:function(e,t,a){},18:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(6),o=a.n(c),i=(a(17),a(11)),s=a(3),l=a(1),u=a(7),p=a.n(u);var m=function(){return r.a.createElement("header",{className:"header"},r.a.createElement("img",{src:p.a,alt:"Logo",className:"header__logo"}))},d=a(8),f=a.n(d),_=r.a.createContext();var h=function(e){var t=e.card,a=e.onCardDelete,n=e.onCardClick,c=e.onCardLike,o=r.a.useContext(_),i=t.name,s=t.link,l=t.likes,u=t.owner,p=o._id===u._id,m=l.some((function(e){return e._id===o._id}));return r.a.createElement("li",{className:"card"},r.a.createElement("img",{className:"card__image",alt:"Pic: ".concat(i),src:s,onClick:function(){n(t)}}),r.a.createElement("div",{className:"card__text-container"},r.a.createElement("p",{className:"card__text"},i),r.a.createElement("div",{className:"card__likes-container"},r.a.createElement("button",{className:"button button_like ".concat(m&&"button_like-black"),onClick:function(){c(t)}}),r.a.createElement("p",{className:"card__likes-text"},l.length))),p&&r.a.createElement("button",{className:"button button_delete",onClick:function(){a(t)}}))};var v=function(e){var t=e.cards,a=e.onCardLike,n=e.onCardDelete,c=e.onCardClick,o=e.onEditProfile,i=e.onEditAvatar,s=e.onAddPlace,l=r.a.useContext(_),u=l.name,p=l.about,m=l.avatar;return r.a.createElement("main",null,r.a.createElement("section",{className:"profile"},r.a.createElement("div",{className:"profile__avatar-container"},r.a.createElement("img",{alt:"Avatar Pic",className:"profile__avatar",src:m}),r.a.createElement("div",{className:"profile__avatar-edit",onClick:i},r.a.createElement("img",{src:f.a,alt:""}))),r.a.createElement("div",{className:"profile__text-container"},r.a.createElement("h1",{className:"profile__name"},u),r.a.createElement("button",{className:"button button_edit",onClick:o}),r.a.createElement("p",{className:"profile__description"},p)),r.a.createElement("button",{className:"button button_add",onClick:s})),r.a.createElement("section",{className:"elements"},r.a.createElement("ul",{className:"cards"},t.map((function(e){return r.a.createElement(h,{card:e,onCardDelete:n,onCardClick:c,onCardLike:a,key:e._id})})))))};var E=function(){return r.a.createElement("footer",{className:"footer"},r.a.createElement("p",{className:"footer__text"},"\xa9 2020 Around The U.S."))};var b=function(e){var t=e.card,a=e.onClose,n=e.isOpen,c=t.name,o=t.link;return r.a.createElement("div",{className:"popup popup_image ".concat(n&&"popup_is-opened")},r.a.createElement("div",{className:"popup__container"},r.a.createElement("img",{className:"popup__image",alt:c,src:o}),r.a.createElement("h2",{className:"popup__image-title"},c),r.a.createElement("button",{className:"button button_close",onClick:a})))},g=a(9),C=a(10),N=new(function(){function e(t){var a=t.baseUrl,n=t.headers;Object(g.a)(this,e),this.baseUrl=a,this.headers=n}return Object(C.a)(e,[{key:"_getResponseData",value:function(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.status))}},{key:"getInitialCards",value:function(){var e=this;return fetch("".concat(this.baseUrl,"/cards"),{headers:this.headers}).then((function(t){return e._getResponseData(t)}))}},{key:"getUserInfo",value:function(){var e=this;return fetch("".concat(this.baseUrl,"/users/me"),{headers:this.headers}).then((function(t){return e._getResponseData(t)}))}},{key:"setUserInfo",value:function(e){var t=this,a=e.name,n=e.about;return fetch("".concat(this.baseUrl,"/users/me"),{method:"PATCH",headers:this.headers,body:JSON.stringify({name:a,about:n})}).then((function(e){return t._getResponseData(e)}))}},{key:"setUserAvatar",value:function(e){var t=this,a=e.avatar;return fetch("".concat(this.baseUrl,"/users/me/avatar"),{method:"PATCH",headers:this.headers,body:JSON.stringify({avatar:a})}).then((function(e){return t._getResponseData(e)}))}},{key:"addCard",value:function(e){var t=this,a=e.name,n=e.link;return fetch("".concat(this.baseUrl,"/cards"),{headers:this.headers,method:"POST",body:JSON.stringify({name:a,link:n})}).then((function(e){return t._getResponseData(e)}))}},{key:"removeCard",value:function(e){var t=this;return fetch("".concat(this.baseUrl,"/cards/").concat(e),{headers:this.headers,method:"DELETE"}).then((function(e){return t._getResponseData(e)}))}},{key:"changeLikeCardStatus",value:function(e,t){var a=this;return fetch("".concat(this.baseUrl,"/cards/likes/").concat(e),{headers:this.headers,method:t}).then((function(e){return a._getResponseData(e)}))}},{key:"getAppInfo",value:function(){return Promise.all([this.getInitialCards(),this.getUserInfo()])}}]),e}())({baseUrl:"https://around.nomoreparties.co/v1/group-1",headers:{authorization:"02dcf3f3-4313-4731-b00a-f80d0e88b6bf","Content-Type":"application/json"}});var k=function(e){var t=e.name,a=e.title,n=e.buttonText,c=e.children,o=e.isOpen,i=e.onClose,s=e.onSubmit;return r.a.createElement("div",{className:"popup popup_type_".concat(t," ").concat(o&&"popup_is-opened")},r.a.createElement("div",{className:"popup__container popup__container_form"},r.a.createElement("form",{className:"popup__form",name:t,onSubmit:s,noValidate:!0},r.a.createElement("h2",{className:"popup__title"},a),c,r.a.createElement("button",{type:"submit",className:"button button_save popup__input"},n)),r.a.createElement("button",{className:"button button_close",onClick:i})))};var O=function(e){var t=e.isOpen,a=e.onClose,n=e.onUpdateUser,c=r.a.useContext(_),o=r.a.useState(""),i=Object(l.a)(o,2),s=i[0],u=i[1],p=r.a.useState(""),m=Object(l.a)(p,2),d=m[0],f=m[1];return r.a.useEffect((function(){u(c.name),f(c.about)}),[c]),r.a.createElement(k,{name:"edit-profile",title:"Edit Profile",buttonText:"Save",isOpen:t,onClose:a,onSubmit:function(e){e.preventDefault(),n({name:s,description:d})},children:r.a.createElement(r.a.Fragment,null,r.a.createElement("label",{className:"popup__field"},r.a.createElement("input",{type:"text",className:"popup__input popup__input_name",placeholder:"Edit Name",minLength:"2",maxLength:"40",pattern:"[A-Za-z -]+",required:!0,id:"name-input",value:s,onChange:function(e){return u(e.target.value)}}),r.a.createElement("span",{id:"name-input-error",className:"popup__input-error"})),r.a.createElement("label",{className:"popup__field"},r.a.createElement("input",{type:"text",className:"popup__input popup__input_desc",placeholder:"Edit Job",minLength:"2",maxLength:"200",required:!0,id:"desc-input",value:d,onChange:function(e){return f(e.target.value)}}),r.a.createElement("span",{className:"popup__input-error",id:"desc-input-error"})))})};var y=function(e){var t=e.isOpen,a=e.onClose,n=e.onUpdateAvatar,c=r.a.useRef();return r.a.createElement(k,{name:"edit-avatar",title:"Change Profile Picture",buttonText:"Save",isOpen:t,onClose:a,children:r.a.createElement(r.a.Fragment,null,r.a.createElement("label",{className:"popup__field"},r.a.createElement("input",{type:"url",className:"popup__input popup__input_avatar",placeholder:"Avatar Link",required:!0,id:"avatar-input",ref:c}),r.a.createElement("span",{id:"avatar-input-error",className:"popup__input-error"}))),onSubmit:function(e){e.preventDefault(),n({avatar:c.current.value})}})};var S=function(e){var t=e.isOpen,a=e.onClose,n=e.onAddPlace,c=r.a.useRef(),o=r.a.useRef();return r.a.createElement(k,{name:"new-place",title:"New Place",buttonText:"Save",isOpen:t,onClose:a,children:r.a.createElement(r.a.Fragment,null,r.a.createElement("label",{className:"popup__field"},r.a.createElement("input",{type:"text",className:"popup__input popup__input_name",placeholder:"Title",minLength:"1",maxLength:"30",required:!0,id:"title-input",ref:c}),r.a.createElement("span",{className:"popup__input-error",id:"title-input-error"})),r.a.createElement("label",{className:"popup__field"},r.a.createElement("input",{type:"url",className:"popup__input popup__input_link",placeholder:"Image Link",required:!0,id:"link-input",ref:o}),r.a.createElement("span",{className:"popup__input-error",id:"link-input-error"}))),onSubmit:function(e){e.preventDefault(),n({name:c.current.value,link:o.current.value})}})};var U=function(){var e=r.a.useState(!1),t=Object(l.a)(e,2),a=t[0],n=t[1],c=r.a.useState(!1),o=Object(l.a)(c,2),u=o[0],p=o[1],d=r.a.useState(!1),f=Object(l.a)(d,2),h=f[0],g=f[1],C=r.a.useState(!1),k=Object(l.a)(C,2),U=k[0],x=k[1],j=r.a.useState({}),P=Object(l.a)(j,2),A=P[0],D=P[1],L=r.a.useState({}),T=Object(l.a)(L,2),R=T[0],I=T[1],w=r.a.useState([]),J=Object(l.a)(w,2),q=J[0],F=J[1];r.a.useEffect((function(){N.getAppInfo().then((function(e){var t=Object(l.a)(e,2),a=t[0],n=t[1];I(n),F(a)})).catch((function(e){console.log(e)}))}),[]);var z=function(){g(!1),n(!1),p(!1),x(!1),D({})};return r.a.createElement(_.Provider,{value:R},r.a.createElement(m,null),r.a.createElement(v,{cards:q,onCardClick:function(e){x(!0),D(e)},onCardDelete:function(e){N.removeCard(e._id).then((function(t){var a=q.filter((function(t){return t._id!==e._id}));F(a)}))},onCardLike:function(e){var t=e.likes.some((function(e){return e._id===R._id}));N.changeLikeCardStatus(e._id,t?"DELETE":"PUT").then((function(t){var a=q.map((function(a){return a._id===e._id?t:a}));F(a)}))},onEditProfile:function(){n(!0)},onEditAvatar:function(){g(!0)},onAddPlace:function(){p(!0)}}),r.a.createElement(E,null),r.a.createElement(O,{isOpen:a,onClose:z,onUpdateUser:function(e){var t=e.name,a=e.description;N.setUserInfo({currentUser:R,name:t,about:a}).then((function(e){I(Object(s.a)(Object(s.a)({},R),{},{name:e.name,about:e.about})),z()})).catch((function(e){console.log(e)}))}}),r.a.createElement(y,{isOpen:h,onClose:z,onUpdateAvatar:function(e){var t=e.avatar;N.setUserAvatar({avatar:t}).then((function(e){I(Object(s.a)(Object(s.a)({},R),{},{avatar:e.avatar})),z()})).catch((function(e){console.log(e)}))}}),r.a.createElement(S,{isOpen:u,onClose:z,onAddPlace:function(e){var t=e.name,a=e.link;N.addCard({name:t,link:a}).then((function(e){F([].concat(Object(i.a)(q),[e])),z()})).catch((function(e){console.log(e)}))}}),r.a.createElement(b,{card:A,isOpen:U,onClose:z}))};o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(U,null)),document.getElementById("root"))},7:function(e,t,a){e.exports=a.p+"static/media/logo.8f7611ae.svg"},8:function(e,t,a){e.exports=a.p+"static/media/edit_large_icon.d476a8b8.svg"}},[[12,1,2]]]);
//# sourceMappingURL=main.fc2d0fa9.chunk.js.map